# Микросервисы системы ставок

Проект представляет собой упрощённую платформу для приёма ставок, реализованную с использованием **FastAPI**. Состоит из двух независимых микросервисов:

- **`line-provider`** — поставщик данных о событиях
- **`bet-maker`** — сервис для приёма ставок пользователей на события


## Сервисы

### line-provider

- Хранит информацию о событиях в памяти
- Позволяет создавать и обновлять события
- Предоставляет API для получения списка доступных событий

Событие содержит:
- Хранит данные о событиях в памяти
- Предоставляет возможность создавать и обновлять события
- Обеспечивает API для получения списка доступных событий

Событие содержит:
- `event_id`: уникальный id события
- `coefficient`: коэффициент ставки
- `deadline`: UNIX-timestamp время, до которого принимаются ставки
- `state`: состояние события, может быть одним из `NEW`, `FINISHED_WIN`, или `FINISHED_LOSE`

### bet-maker

- Принимает ставки от пользователей
- Получает информацию о событиях из `line-provider`
- Вычисляет результат ставки после завершения события
- Сохраняет данные о ставках в базе PostgreSQL

Ставка содержит:
- `bet_id`
- `event_id`
- `amount`
- `status`: `PENDING`, `WIN`, `LOSE`



## Развертывание


Перед развертыванием убедитесь, что файл .env составлен корректно, пример:

```bash 
DB_URL = "postgresql+asyncpg://postgres:postgres@db:5432/bets"
POSTGRES_PASSWORD=postgres
POSTGRES_DB=postgres
```

Для запуска проекта используйте команду: ```docker-compose up --build ```
